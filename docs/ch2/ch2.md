## 리팩터링 정의

1. 리팩터링이란 무엇인가?
    - 겉보기 동작은 유지한 채 코드를 이해하고 수정하고 쉽도록 내부구조를 재구성 하는 것
2. 어떻게 진행하는가?
    - 작은 단계로 나눠서 코드를 수정한다.
    - 단계별로 항상 코드가 정상작동해야한다.
    - 언제든 리팩터링을 멈출 수 있다.
    - 겉보기 동작은 전과후가 같아야한다.

## 2개의 모자

'리팩터링모자'와 '기능추가모자'를 바꿔서가며 지금 내가 무슨 작업을 하고 있는지 인식해야한다.
* 만약 '리팩터링모자'를 썼다면 테스트나 기능추가하는 하지 않고 오직 리팩터링만 진행한다.

## 리팩터링하는 이유

- 규칙적인 리팩터링은 코드의 구조를 지탱해준다.
- 잘 작동하더라도 이해하기 쉬운 코드로 리팩터링을 진행해보자
- 리팩터링은 습관이다. 견고한 코드를 만드는.
- 리팩터링을 결국에는 코드 개발 속도를 높인다.
- 시스템이 오래되면 새 기능을 추가하는데 영향도 파악하는게 어렵지만 리팩터링을 자주하면 수정지점과 영향도파악을 쉽게할 수 있다.

## 언제 리팩터링해야 할까?

- 3의 법칙
    1. 처음에는 그냥 한다.
    2. 비슷한 일을 두번째로 하면 일단 한다.
    3. 세번째는 리팩터링 한다. (스트라이크 세 번이면 리팩터링 하라!)
- 중복코드가 생기면 ‘함수 매개변수화’를 통해 중복코드를 없애라
- 리팩터링을 진행하며 코드 구조를 깊게 이해할 수 있다.
- 간단한 것은 즉시, 그렇지 않은 것은 할일에 적어두고 하던 일 이후에 리팩터링 하라.
- 오래 걸리는 리팩터링은 추상화로 갈아타기로 진행할 수 있다.
- 외부API 다루듯 호출해서 사용한다면 코드가 지저분해도 그대로 둔다.

## 리팩터링 시 고려사항

- 기능 개발 속도 저하?
    - 궁극적인 목적은 건강한 코드베이스를 유지하여 복잡한 새 기능을 철저한 테스트를 통해 더 빨리 추가할 수 있도록 하는 것이다.
- **클린코드와 리팩터링은 ‘도덕’이 아닌 ‘경제’적인 이유로 하는 것이다.**
- 공개된 인터페이스가 리팩터링 대상이라면 기존 인터페이스르 유지하고 새롭게 인터페이스를 만들 수 있다.
- 단방향 ‘머지’ 보단 ‘통합’이 좋다.
    - 브랜치 통합 주기를 짧게 가져가 지속적 통합(CI)해야한다.
- 테스팅
    - 리팩터링은 항상 겉보기 동작이 똑같이 유지되야만 한다. 그걸 보장하는게 견고한 테스트코드이다.
    - 리팩터링 후 오류를 빨리 잡기 위해서 테스트 스위트가 필요하다.
    - CI에 통합된 테스트는 지속적 배포의 핵심
- 리팩터링,아키텍쳐,애그니
    - 현재까지 파악한 요구사항만으로 일단 소프트웨어를 구축
    - 추후 더 잘이해하게 되면 그에 맞게 리팩터링 진행
    - ‘자가테스트코드’ - ‘지속적 통합’ - ‘리팩터링’을 반복하며 개발할 것
- 성능 문제는 기존 코드에서 나기도 하고 굉장히 일부분이 많은 성능을 잡는다.
- 리팩터링을 하면 기능 추가가 빠르고 남은 시간을 성능 분석 개선에 할애할 수 있다.
- 레거시 코드가 테스트도 없다면 일단 테스트를 작성해보고 조금이라도 개선하려고 해보자.

# 느낀점
* 리팩터링의 핵심은 '테스트코드' - '지속적 통합' - '리팩터링'의 반복이며 테스트코드가 가장 먼저 준비되어야 한다.
* 클린코드와 리팩터링은 '도덕'적인 이유가 아닌 빠른 개발을 위한 '경제'적인 이유여야만 한다.
* 항상 작은 단계로 나누고 언제든 멈출 수 있어야하며 그 때 동작은 전과후가 같아야만 한다.

위 3가지를 기억하고 수행한다면 내 코드를 남들 또한 이해하기 쉬워지고 기능추가하기도 쉬워질 것 같다.
결국 귀찮더라도 테스트코드를 작성하는 것이 필수적이며 매우 중요한 것이란 생각이든다.